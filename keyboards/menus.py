–î–æ–±—Ä–µ, –æ–ø–∏—à—É –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–≤—ñ–≥–∞—Ü—ñ—è":

1. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É "üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è" –Ω–∞ ReplyKeyboardMarkup
- –í —á–∞—Ç –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è"

2. –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–º:
- –°–ø—Ä–∞—Ü—å–æ–≤—É—î —Ö–µ–Ω–¥–ª–µ—Ä @router.message(MenuStates.MAIN_MENU)
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –û—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ ID —á–∞—Ç—É

3. –ü–µ—Ä–≤–∏–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞:
- –í–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–µ–∫—Å—Ç–æ–º "üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è"
- –û—Ç—Ä–∏–º—É—é—Ç—å—Å—è –¥–∞–Ω—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É (message_ids, last_text, —Ç–æ—â–æ)
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —Å—Ç–∞–Ω—ñ

4. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö:
- –§–æ—Ä–º—É—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (NAVIGATION_MENU_TEXT)
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –¥–ª—è "–ø—É–ª—å—Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è" (get_navigation_menu())
- –ì–æ—Ç—É—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –¥–ª—è —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ "–µ–∫—Ä–∞–Ω—É" (NAVIGATION_INTERACTIVE_TEXT)
- –§–æ—Ä–º—É—î—Ç—å—Å—è —ñ–Ω–ª–∞–π–Ω –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –¥–ª—è "–µ–∫—Ä–∞–Ω—É" (get_generic_inline_keyboard())

5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:
- –í–∏–¥–∞–ª—è—î—Ç—å—Å—è —Å—Ç–∞—Ä–µ –∑–≤–∏—á–∞–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Å—Ç–∞—Ä–∏–π "–ø—É–ª—å—Ç")
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–æ–≤–µ –∑–≤–∏—á–∞–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –Ω–æ–≤–æ—é –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–æ—é
- –†–µ–¥–∞–≥—É—î—Ç—å—Å—è —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è "–µ–∫—Ä–∞–Ω")

6. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É:
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è ID –Ω–æ–≤–æ–≥–æ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –æ—Å—Ç–∞–Ω–Ω—ñ–π –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π —Ç–µ–∫—Å—Ç —Ç–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞
- –í—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π —Å—Ç–∞–Ω MenuStates.NAVIGATION_MENU

7. –ö—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π "–µ–∫—Ä–∞–Ω" –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é
- –ü—ñ–¥ –Ω–∏–º –∑'—è–≤–ª—è—î—Ç—å—Å—è –Ω–æ–≤–∏–π "–ø—É–ª—å—Ç –∫–µ—Ä—É–≤–∞–Ω–Ω—è" –∑ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–æ–≥–æ –º–µ–Ω—é
- –ë–æ—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–æ–≥–æ –º–µ–Ω—é

–ö–æ–¥ —Ü—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:
@router.message(MenuStates.MAIN_MENU)
async def handle_navigation_transition(message: Message, state: FSMContext, bot: Bot):
    # 1. –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    await safe_delete_message(bot, message.chat.id, message.message_id)
    
    # 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Å—Ç–∞–Ω—É
    data = await state.get_data()
    old_message_id = data.get('bot_message_id')
    interactive_message_id = data.get('interactive_message_id')
    
    # 3. –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–æ–≥–æ "–ø—É–ª—å—Ç–∞"
    if old_message_id:
        await safe_delete_message(bot, message.chat.id, old_message_id)
    
    # 4. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ "–ø—É–ª—å—Ç–∞"
    new_message = await bot.send_message(
        chat_id=message.chat.id,
        text=NAVIGATION_MENU_TEXT,
        reply_markup=get_navigation_menu()
    )
    
    # 5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è "–µ–∫—Ä–∞–Ω—É"
    if interactive_message_id:
        await bot.edit_message_text(
            chat_id=message.chat.id,
            message_id=interactive_message_id,
            text=NAVIGATION_INTERACTIVE_TEXT,
            reply_markup=get_generic_inline_keyboard()
        )
    
    # 6. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
    await state.update_data(
        bot_message_id=new_message.message_id,
        last_text=NAVIGATION_MENU_TEXT,
        last_keyboard=get_navigation_menu()
    )
    await state.set_state(MenuStates.NAVIGATION_MENU)
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–ø–∏–Ω—è—î—Ç—å—Å—è –≤ –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–æ–º—É –º–µ–Ω—é, –¥–µ:
- –ù–∞ "–µ–∫—Ä–∞–Ω—ñ" –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∑–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ä–æ–∑–¥—ñ–ª–∏
- –ù–∞ "–ø—É–ª—å—Ç—ñ" –¥–æ—Å—Ç—É–ø–Ω—ñ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –≤ —Ä—ñ–∑–Ω—ñ —Ä–æ–∑–¥—ñ–ª–∏
- –í—Å—ñ ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ —Å—Ç–∞–Ω—ñ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó —Ä–æ–±–æ—Ç–∏
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Å—Ç–∞–Ω –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–º–∞–Ω–¥

–¶–µ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥—É –º—ñ–∂ —Å—Ç–∞–Ω–∞–º–∏ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –æ–±–æ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
